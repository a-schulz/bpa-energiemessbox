workspace "Monitoring System" "Modell basierend auf dem Diagramm mit Benutzerinteraktion" {

    !identifiers hierarchical

    model {
        mitarbeiter = person "Mitarbeiter" {
            description "Trägt den Handschuh und erhält Warnungen via Vibration."
        }

        system = softwareSystem "Überwachungssystem" {
            description "Erfasst Energie- und Luftdaten, wertet sie aus und leitet Warnungen weiter."

            energiemessbox = container "Energiemessbox" {
                technology "OPC UA"
                description "Liefert Messdaten zu Druck und Luftfluss."
            }

            nodered = container "NodeRed" {
                technology "NodeRed (Flow-basiert)"
                description "Verarbeitet Messdaten von OPC UA und RNHD, publiziert sie weiter."
            }

            rnhd = container "RNHD" {
                technology "REST API"
                description "Liefert zusätzliche Daten via REST."
            }

            messageBroker = container "MessageBroker" {
                technology "MQTT oder ähnliches"
                description "Empfängt Daten von NodeRed und verteilt sie an Subsysteme."
            }

            handschuh = container "Handschuh" {
                description "Empfängt Warnungen auf Service Level 2 und gibt Vibration als Feedback an den Mitarbeiter."
            }

            aas = container "AAS" {
                description "Empfängt Daten auf Service Level 1."
            }

            energiemessbox -> nodered "rPressure, rFlow via OPCUA"
            rnhd -> nodered "REST Positions-Daten"
            nodered -> messageBroker "publish Warning, Airflow, Pressure"
            messageBroker -> handschuh "subscribe Topic: Warning, Service Level 2"
            messageBroker -> aas "subscribe Topic: AAS, Service Level 1"
            handschuh -> mitarbeiter "sendet Warnung (Vibration)"
        }
    }

    views {
        container system "MonitoringContainerDiagram" {
            include *
            autolayout lr
        }

        styles {
            element "Person" {
                shape person
                background #116611
                color white
            }

            element "Container" {
                background #4682B4
                color white
            }
        }
    }
}
